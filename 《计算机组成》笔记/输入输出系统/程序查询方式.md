---
title: 程序查询方式
date: 2018-07-27 09:28:43
tags: 计算机组成
---

# 概述
程序查询方式的核心问题在于 **每时每刻不断查询IO设备是否准备就绪**，查询流程图如下所示

![程序查询方式](https://blog-1252749790.file.myqcloud.com/ComputerOrganization/%E7%A8%8B%E5%BA%8F%E6%9F%A5%E8%AF%A2%E6%96%B9%E5%BC%8F.png)

当IO设备比较多的时候，CPU会按照各个IO设备的优先级逐个查询，流程图如下所示

![多IO设备的查询方式](https://blog-1252749790.file.myqcloud.com/ComputerOrganization/%E5%A4%9AIO%E8%AE%BE%E5%A4%87%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%96%B9%E5%BC%8F.png)


# 程序查询流程
![程序查询流程图](https://blog-1252749790.file.myqcloud.com/ComputerOrganization/%E7%A8%8B%E5%BA%8F%E6%9F%A5%E8%AF%A2%E6%B5%81%E7%A8%8B%E5%9B%BE.png)

1. CPU先保存自己的寄存器情况
2. 设置计数器，即要读取多少次
3. 设置要存放的位置的起始位置
4. 启动IO设备
5. 获取IO设备状态标志到CPU，检查IO设备是否准备就绪：如果准备就绪，开始读取数据，反之原地踏步
6. CPU执行IO指令，或从IO接口中的数据缓冲寄存器中读取一个数据，或者写入数据到IO接口的数据缓冲寄存器内
7. 修改主存地址
8. 修改计数器（比如从正数递减到0，或从负数递增到0）
9. 结束IO传输