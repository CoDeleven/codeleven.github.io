---
title: 系统总线(二)
date: 2018-07-09 10:34:44
tags: 计算机组成
---

# 总线标准
前面在总线结构里介绍的系统总线、存储总线都是抽象的，没有具体说明采用什么技术来实现。本小节就是为了说明总线的具体实现标准。

## ISA总线
优点：
* ISA总线是使用独立于CPU的总线时钟，因此CPU可以使用高于总线频率的时钟。有利于CPU性能的提高
缺点：
* 没有总线仲裁的硬件逻辑，因此它不能支持多台主设备（不支持多台具有申请总线控制权的设备）系统
* ISA上的所有数据都需要经过CPU或DMA接口来管理，因此CPU需要花费大量时间来控制与外部设备交换数据。
* ISA时钟频率为8MHZ，最大传输率为16MBps，数据线为16位，地址线为24位。

## EISA总线
优点：
* ISA的优点
* 能支持多个总线主控器和突发方式的传输

## VESA总线


# 总线结构
## 单总线结构
![总线连接之单总线结构](https://blog-1252749790.file.myqcloud.com/ComputerOrganization/%E6%80%BB%E7%BA%BF%E8%BF%9E%E6%8E%A5%E4%B9%8B%E5%8D%95%E6%80%BB%E7%BA%BF%E8%BF%9E%E6%8E%A5.png)

将CPU、主存、I/O设备都挂在一组总线上，这种结构 **简单**、 **易于扩充**，它 **不允许两个以上得部件在同一时刻向总线传输信息**。这类总线多数被小型计算机或微型计算机采用。而且当I/O设备数量足够多得时候，总线发出得控制信号从一端顺序的传到第n个设备，其 **传播延时会严重地影响系统的工作效率**；

当数据传输需求量和传输速度要求不太高的情况下，为克服总线瓶颈问题，尽可能增加总线宽度和提高传输速率来解决；

当数据传输需求量和传输速度要求较高时，单总线结构不能满足系统工作的需要，因此不得不采用多总线结构。

## 多总线结构
![双总线结构](https://blog-1252749790.file.myqcloud.com/ComputerOrganization/%E5%8F%8C%E6%80%BB%E7%BA%BF%E7%BB%93%E6%9E%84.png)

双总线结构的特点 **是将速度较低的I/O设备从单总线上分离出来**，形成主存总线与I/O总线分开的结构。低俗I/O由通道这个特殊的处理器进行管理。将速率不同的组件进行分类，然后将它们连接在不同的通道上，那么计算机系统的工作效率就会得到提升。

### 通道
该部件主要时为了 **使一些原来由CPU处理的I/O人物转由通道来承担，从而把CPU从繁杂的I/O任务解脱出来，仅当通道完成了规定的I/O任务后，才向CPU发中断信号**。实际上，I/O通道是一种特殊的处理机，它具有 **执行I/O指令的能力**，并通过执行 **通道（I/O）程序来控制I/O操作**。

I/O通道的特点有以下两个方面：
* 指令类型单一，只能处理I/O方面的内容
* 通道没有自己的内存，只能和CPU共享主存

## 三总线结构
![三总线结构](https://blog-1252749790.file.myqcloud.com/ComputerOrganization/%E4%B8%89%E6%80%BB%E7%BA%BF%E7%BB%93%E6%9E%84.png)

该结构多了主存总线和DMA总线，在三种总线里，任意时刻只能使用一种总线：使用DMA总线时，无法使用主存总线；I/O总线只有在CPU执行I/O指令时才能用得到。


## 三总线结构变种
![三总线结构变种](https://blog-1252749790.file.myqcloud.com/ComputerOrganization/%E4%B8%89%E6%80%BB%E7%BA%BF%E7%BB%93%E6%9E%84%E5%8F%98%E7%A7%8D.png)

CPU和Cache之间有一个局部总线，我们可以挂载多个I/O设备在局部总线上。Cache直接连接到系统总线上，这样Cache就可以和主存互相交换数据,而且I/O设备和主存间的交换也不需要经过CPU。还有一条扩展总线，他将局域网、SCSI、Modem等等都串联在一起，扩展总线通过扩展总线接口与系统总线相连，由此便可实现两者的数据传输。

## 四总线结构
![四总线结构](https://blog-1252749790.file.myqcloud.com/ComputerOrganization/%E5%9B%9B%E6%80%BB%E7%BA%BF%E7%BB%93%E6%9E%84.png)
该结构相比三总线结构多了一层高速总线，在高速总线上会挂接一些高速的I/O设备。它们通过Cache控制机构中的高速总线或高速缓冲 和 局部总线相连，使得这些高速设备与CPU更密切。而一些低速设备仍然挂载在扩展总线上。这种结构的优点就是高速设备不需要过多依赖CPU的功能，同时高速设备相比扩展总线上的设备更接近CPU，各自的效率会更高。

# 总线控制

## 集中控制优先仲裁方式

* 链式查询
![链式查询](https://blog-1252749790.file.myqcloud.com/ComputerOrganization/%E9%93%BE%E5%BC%8F%E6%9F%A5%E8%AF%A2.png)


BR是接口向总线控制部件发起占用请求

BG到达的接口有总线请求，BG信号就不再往下传了，意味着该接口获得了总线使用权。

BS是接口获得了总线使用权后，和总线控制部件建立的总线繁忙信号，表示它占用了总线。

该种查询方式中，离总线控制部件最近的设备具有最高的优先级。

这种方式的特点是：只需要很少几根线就能按一定优先次序实现总线控制，并且很容易扩充设备，但对电路故障很敏感，且优先级别低的设备可能很难获取请求。

* 计数器定时查询
![计数器定时查询](https://blog-1252749790.file.myqcloud.com/ComputerOrganization/%E8%AE%A1%E6%95%B0%E5%99%A8%E5%AE%9A%E6%97%B6%E6%9F%A5%E8%AF%A2.png)

该种查询方式相比前面的查询多了一条设备地址线，少了一根BG线，总线控制部件接收到BR送来的总线请求信号后，在总线未被使用（BS=0）的情况下，总线控制部件中的计数器开始计数，并通过设备地址线，向各设备发出一组地址信号。当某个 *请求占用总线* 的设备地址与计数器一致时，该设备就获得总线使用权。

计数可以从“0”开始，也可以从上一次计数的终止点开始，当然也可以由程序设置。这种方式对电路故障不如 *链式查询* 敏感，但增加了设备地址数，控制也较复杂。

* 独立请求方式
![独立请求方式](https://blog-1252749790.file.myqcloud.com/ComputerOrganization/%E7%8B%AC%E7%AB%8B%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F.png)

该种查询方式内，每台设备均有一对总线请求先BR<sub>i</sub>和总线同意线BG<sub>i</sub>。当设备要求使用总线时，便发出该设备的请求信号。总线控制部件中有一排队电路，可根据优先次序确定响应哪一台设备的请求。该方式响应速度快，优先次序控制灵活，但控制线数量多。
